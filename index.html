<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script type="text/javascript" src="turn.min.js"></script>
    <script type="text/javascript" src="turn.js"></script>
    
    <title>Flipbook</title>
    <style type="text/css">
    body{
    	background:#ccc;
    }
    #book{
    	width:800px;
    	height:500px;
    }
    
    #book .turn-page{
    	background-color:white;
    }
    
    #book .cover{
    	background:#333;
    }
    
    #book .cover h1{
    	color:white;
    	text-align:center;
    	font-size:50px;
    	line-height:500px;
    	margin:0px;
    }
    
    #book .loader{
    	background-image:url(loader.gif);
    	width:24px;
    	height:24px;
    	display:block;
    	position:absolute;
    	top:238px;
    	left:188px;
    }
    
    #book .data{
    	text-align:center;
    	font-size:40px;
    	color:#999;
    	line-height:500px;
    }
    
    #controls{
    	width:800px;
    	text-align:center;
    	margin:20px 0px;
    	font:30px arial;
    }
    
    #controls input, #controls label{
    	font:30px arial;
    }
    
    #book .odd{
    	background-image:-webkit-linear-gradient(left, #FFF 95%, #ddd 100%);
    	background-image:-moz-linear-gradient(left, #FFF 95%, #ddd 100%);
    	background-image:-o-linear-gradient(left, #FFF 95%, #ddd 100%);
    	background-image:-ms-linear-gradient(left, #FFF 95%, #ddd 100%);
    }
    
    #book .even{
    	background-image:-webkit-linear-gradient(right, #FFF 95%, #ddd 100%);
    	background-image:-moz-linear-gradient(right, #FFF 95%, #ddd 100%);
    	background-image:-o-linear-gradient(right, #FFF 95%, #ddd 100%);
    	background-image:-ms-linear-gradient(right, #FFF 95%, #ddd 100%);
    }
</style>
</head>
<body>
    <div id="flipbook"></div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const totalPages = 139; // Número total de páginas
            let currentPage = 0;

            // Variables para el manejo de gestos táctiles
            let startX = 0;
            let endX = 0;

            function pad(number, length) {
                return number.toString().padStart(length, '0');
            }

            function showPage(pageNumber) {
                const pages = document.querySelectorAll('.page');
                pages.forEach(page => page.classList.remove('active'));

                const currentPageElement = document.getElementById(`page-${pageNumber}`);
                if (currentPageElement) {
                    currentPageElement.classList.add('active');
                }
            }

            function createPages() {
                const container = document.getElementById('flipbook');
                for (let i = 0; i < totalPages; i++) {
                    const pageElement = document.createElement('div');
                    pageElement.className = 'page';
                    pageElement.id = `page-${i}`;
                    const imagePath = `RPi_PiPico_Digital_v11/RPi_PiPico_Digital_v11-${pad(i + 1, 3)}.png`;
                    pageElement.style.backgroundImage = `url('${imagePath}')`;
                    container.appendChild(pageElement);
                }
            }

            function handleSwipe() {
                const deltaX = endX - startX;
                if (deltaX > 50) {
                    // Swipe derecha
                    if (currentPage > 0) {
                        currentPage--;
                        showPage(currentPage);
                    }
                } else if (deltaX < -50) {
                    // Swipe izquierda
                    if (currentPage < totalPages - 1) {
                        currentPage++;
                        showPage(currentPage);
                    }
                }
            }

            // Eventos táctiles para detectar swipe
            document.body.addEventListener('touchstart', function (event) {
                startX = event.touches[0].clientX;
            });

            document.body.addEventListener('touchend', function (event) {
                endX = event.changedTouches[0].clientX;
                handleSwipe();
            });

            // Eventos para teclado (flechas)
            document.body.addEventListener('keydown', function (event) {
                if (event.key === 'ArrowRight') {
                    if (currentPage < totalPages - 1) {
                        currentPage++;
                        showPage(currentPage);
                    }
                } else if (event.key === 'ArrowLeft') {
                    if (currentPage > 0) {
                        currentPage--;
                        showPage(currentPage);
                    }
                }
            });

            // Crear páginas y mostrar la primera
            createPages();
            showPage(currentPage);
        });
    </script>
</body>
</html>
